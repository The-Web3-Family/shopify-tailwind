{{ 'section-solana-send-button.css' | asset_url | stylesheet_tag }}

<div class='solana-send-section color-{{ section.settings.color_scheme }} gradient'>
  <div class='page-width'>
    <div class='solana-send-container'>
      {%- if section.settings.heading != blank -%}
        <h2 class='solana-send-heading {{ section.settings.heading_size }}'>
          {{ section.settings.heading }}
        </h2>
      {%- endif -%}

      {%- if section.settings.text != blank -%}
        <div class='solana-send-text rte'>
          {{ section.settings.text }}
        </div>
      {%- endif -%}

      {%- if settings.thirdweb_enabled -%}
        <div class='solana-send-button-wrapper'>
          <thirdweb-solana-send
            data-client-id='{{ settings.thirdweb_client_id }}'
            data-merchant-wallet='{{ settings.thirdweb_merchant_wallet }}'
            data-sol-amount='{{ section.settings.sol_amount | default: '0.1' }}'
            data-button-text='{{ section.settings.button_text | default: 'Send SOL' }}'
            data-button-style='{{ section.settings.button_style }}'
          >
            <button
              class='button solana-send-btn {% if section.settings.button_style == 'secondary' %}button--secondary{% else %}button--primary{% endif %}'
              data-thirdweb-send
            >
              <span class='solana-icon'>ðŸª™</span>
              {{ section.settings.button_text | default: 'Send SOL' }}
            </button>
          </thirdweb-solana-send>
        </div>
      {%- else -%}
        <div class='solana-send-disabled'>
          <p>Thirdweb Solana payments are not enabled. Please enable them in theme settings.</p>
        </div>
      {%- endif -%}
    </div>
  </div>
</div>

<style>
  .solana-send-section {
    padding: 2rem 0;
  }

  .solana-send-container {
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
  }

  .solana-send-heading {
    margin-bottom: 1rem;
  }

  .solana-send-text {
    margin-bottom: 2rem;
  }

  .solana-send-button-wrapper {
    display: flex;
    justify-content: center;
  }

  .solana-send-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.1rem;
    padding: 1rem 2rem;
    border-radius: 8px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .solana-send-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .solana-send-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }

  .solana-icon {
    font-size: 1.2rem;
  }

  .solana-send-disabled {
    padding: 1rem;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    color: #6c757d;
  }

  .thirdweb-loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid #ffffff;
    border-radius: 50%;
    border-top-color: transparent;
    animation: spin 1s ease-in-out infinite;
  }

  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  .thirdweb-success {
    color: #28a745;
    background: #d4edda;
    border: 1px solid #c3e6cb;
    padding: 0.75rem 1rem;
    border-radius: 4px;
    margin-top: 1rem;
  }

  .thirdweb-error {
    color: #dc3545;
    background: #f8d7da;
    border: 1px solid #f5c6cb;
    padding: 0.75rem 1rem;
    border-radius: 4px;
    margin-top: 1rem;
  }
</style>

{% schema %}
{
  "name": "Solana Send Button",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Send Solana"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        {
          "value": "h2",
          "label": "Small"
        },
        {
          "value": "h1",
          "label": "Medium"
        },
        {
          "value": "h0",
          "label": "Large"
        }
      ],
      "default": "h1",
      "label": "Heading size"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Description",
      "default": "<p>Send SOL directly to our wallet using Thirdweb integration.</p>"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Send SOL"
    },
    {
      "type": "select",
      "id": "button_style",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        }
      ],
      "default": "primary",
      "label": "Button style"
    },
    {
      "type": "text",
      "id": "sol_amount",
      "label": "SOL Amount",
      "default": "0.1",
      "info": "Amount of SOL to send (in SOL, not lamports)"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "Solana Send Button"
    }
  ]
}
{% endschema %}
